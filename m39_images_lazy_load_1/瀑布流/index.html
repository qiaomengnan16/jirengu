<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>

        .waterfall {
            margin: 0 auto;
        }

        .waterfall img {
            width: 100px;
            position: absolute;
            margin: 10px;
            transition: all 1s;
        }


    </style>
</head>
<body>
    <div class="waterfall">
        <img src="http://via.placeholder.com/100x100" />
        <img src="http://via.placeholder.com/100x70" />
        <img src="http://via.placeholder.com/100x150" />
        <img src="http://via.placeholder.com/100x250" />
        <img src="http://via.placeholder.com/100x80" />
        <img src="http://via.placeholder.com/100x90" />
        <img src="http://via.placeholder.com/100x120" />
        <img src="http://via.placeholder.com/100x210" />
        <img src="http://via.placeholder.com/100x230" />
        <img src="http://via.placeholder.com/100x100" />
        <img src="http://via.placeholder.com/100x70" />
        <img src="http://via.placeholder.com/100x150" />
        <img src="http://via.placeholder.com/100x250" />
        <img src="http://via.placeholder.com/100x80" />
        <img src="http://via.placeholder.com/100x90" />
        <img src="http://via.placeholder.com/100x120" />
        <img src="http://via.placeholder.com/100x210" />
        <img src="http://via.placeholder.com/100x230" />
        <img src="http://via.placeholder.com/100x100" />
        <img src="http://via.placeholder.com/100x70" />
        <img src="http://via.placeholder.com/100x150" />
        <img src="http://via.placeholder.com/100x250" />
        <img src="http://via.placeholder.com/100x80" />
        <img src="http://via.placeholder.com/100x90" />
        <img src="http://via.placeholder.com/100x120" />
        <img src="http://via.placeholder.com/100x210" />
        <img src="http://via.placeholder.com/100x230" />

    </div>


    <script src="../jquery.min.js"></script>


    <script>
        var colCount
        var colHeightArray = []
        var imgWidth = $('.waterfall img').outerWidth(true)


        colCount = Math.floor($('.waterfall').width() / imgWidth)
        for(var i = 0; i < colCount ; i++ ){
            colHeightArray[i] = 0
        }

        $('.waterfall img').on('load',function () {

            var minValue = colHeightArray[0]
            var minIndex = 0
            for(var i = 0; i < colCount ; i++ ){
                if(colHeightArray[i] < minValue){
                    minValue = colHeightArray[i]
                    minIndex = i
                }
            }

            $(this).css({
                left : minIndex * imgWidth,
                top : minValue
            })

            colHeightArray[minIndex] += $(this).outerHeight(true)

        })

        $(window).on('resize',function () {
            colHeightArray = []
            colCount = Math.floor($('.waterfall').width() / imgWidth)
            for(var i = 0; i < colCount ; i++ ){
                colHeightArray[i] = 0
            }

            $('.waterfall img').each(function () {

                var minValue = colHeightArray[0]
                var minIndex = 0
                for(var i = 0; i < colCount ; i++ ){
                    if(colHeightArray[i] < minValue){
                        minValue = colHeightArray[i]
                        minIndex = i
                    }
                }

                $(this).css({
                    left : minIndex * imgWidth,
                    top : minValue
                })

                colHeightArray[minIndex] += $(this).outerHeight(true)

            })



        })





    </script>

</body>
</html>